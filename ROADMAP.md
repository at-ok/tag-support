# 開発ロードマップ

## プロジェクト目標

**最終目標**: 大学生10名規模での2-3km範囲リアル鬼ごっこ運営支援PWA

**MVP目標日**: 未定（Firebase設定次第）  
**β版目標日**: 未定  

## Phase 1: 基礎実装 ✅ (完了)
**期間**: 2025-08-06  
**状況**: 完了

### 完了した機能
- Next.js + Firebase基盤構築
- 認証・位置情報・地図システム
- 役職別UI（逃走者・鬼・GM）
- PWA基礎設定

### 成果物
- 20個のソースファイル
- 完全なTypeScript型システム
- 3つの役職別画面

---

## Phase 2: 実用化準備 🚧 (次回優先)
**想定期間**: 1-2セッション  
**目標**: 実際にテストプレイ可能な状態

### 2.1 Firebase実環境構築
- [ ] Firebaseプロジェクト作成・設定
- [ ] Authentication有効化
- [ ] Firestore設定・セキュリティルール
- [ ] 実環境での動作確認

### 2.2 モバイル対応最適化  
- [ ] レスポンシブデザイン調整
- [ ] タッチ操作最適化
- [ ] PWAインストールテスト
- [ ] バッテリー使用量確認

### 2.3 基本的なゲーム機能
- [ ] ゲーム開始/終了制御
- [ ] 制限時間表示
- [ ] 基本的な勝利条件判定

**重要マイルストーン**: 初回実機テストプレイ実施

---

## Phase 3: 通知・ミッション機能 📋
**想定期間**: 2-3セッション  

### 3.1 Push通知システム
- [ ] Firebase Cloud Messaging設定
- [ ] 通知許可フロー
- [ ] 役職別通知ロジック
  - ゲーム開始/終了通知
  - ミッション完了通知  
  - 捕獲/救出通知
- [ ] バックグラウンド通知テスト

### 3.2 ミッションシステム
- [ ] ミッションデータモデル実装
- [ ] 位置ベース判定ロジック
  - エリア到達判定
  - 滞在時間計測
  - 距離計算最適化
- [ ] ミッション進行UI
- [ ] 達成状況リアルタイム同期

### 3.3 ゲーム進行管理
- [ ] GM用ミッション作成UI
- [ ] 動的ミッション配信
- [ ] 進行状況ダッシュボード

---

## Phase 4: エリア管理・安全機能 🗺️
**想定期間**: 2-3セッション

### 4.1 エリア管理システム
- [ ] セーフゾーン設定UI
- [ ] 立禁エリア設定UI  
- [ ] ドラッグ&ドロップでのエリア編集
- [ ] エリア境界での自動警告

### 4.2 安全機能強化
- [ ] 危険エリア警告システム
- [ ] 緊急停止機能
- [ ] 参加者の安全状況監視
- [ ] SOS機能

### 4.3 位置情報精度調整
- [ ] GM用精度設定UI
- [ ] 更新間隔動的調整
- [ ] 通信断時の挙動改善

---

## Phase 5: 高度なゲーム機能 🎮
**想定期間**: 3-4セッション

### 5.1 特殊役職システム
- [ ] データモデル拡張
- [ ] 特殊能力定義・実装
- [ ] バランス調整機能

### 5.2 チーム戦機能
- [ ] チーム間通信
- [ ] チーム別スコアリング
- [ ] 連携ミッション

### 5.3 ゲームモード追加
- [ ] 複数ゲームモード選択
- [ ] カスタムルール設定
- [ ] トーナメント機能

---

## Phase 6: 分析・改善機能 📊
**想定期間**: 2-3セッション

### 6.1 リプレイシステム  
- [ ] 移動履歴可視化
- [ ] タイムライン再生
- [ ] ハイライト機能

### 6.2 ゲーム分析
- [ ] 統計データ収集
- [ ] プレイヤー行動分析
- [ ] ゲームバランス分析

### 6.3 改善サイクル
- [ ] フィードバック収集システム
- [ ] A/Bテスト基盤
- [ ] パフォーマンス監視

---

## Phase 7: 本格運用準備 🚀
**想定期間**: 2-3セッション

### 7.1 ドメイン・インフラ
- [ ] atok.dev ドメイン設定
- [ ] Cloudflare Pages設定
- [ ] 本番環境構築

### 7.2 運用機能
- [ ] 複数GM対応
- [ ] イベント管理システム
- [ ] 参加者募集機能

### 7.3 スケーラビリティ
- [ ] 大規模対応（50-100名）
- [ ] WebSocket高頻度同期
- [ ] 負荷テスト・最適化

---

## 技術的マイルストーン

### セキュリティ
- [ ] Firestore セキュリティルール強化
- [ ] 位置情報保護対策
- [ ] 個人情報取扱改善

### パフォーマンス  
- [ ] バンドルサイズ最適化
- [ ] 地図描画パフォーマンス
- [ ] バッテリー消費最適化

### 品質保証
- [ ] 自動テスト導入
- [ ] E2Eテスト設定
- [ ] CI/CD構築

## リスク管理

### 技術リスク
- **Firebase制限**: 無料枠・API制限対策
- **位置精度**: GPS精度の天候・環境依存
- **バッテリー**: 長時間使用での電池消耗

### 運用リスク  
- **安全面**: 屋外活動での事故リスク
- **通信**: 電波状況による機能制限
- **参加者**: ルール理解・操作習熟

### 対策
- 段階的テスト実施
- フォールバック機能準備
- 十分な事前説明・練習時間確保

## 次回セッション重点項目

1. **Firebase実環境構築** (最高優先)
2. **モバイル実機テスト**
3. **基本ゲーム機能追加**

**目標**: 実際に屋外でテストプレイが可能な状態を目指す